---
import { getCollection } from 'astro:content'
import Layout from '@/layouts/Layout.astro'
import { ArrowLeft, Calendar, Tag } from 'lucide-react'

// 获取所有博客文章
const posts = await getCollection('blog')
// 按发布日期排序
const sortedPosts = posts.sort((a, b) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime())
---

<Layout title="博客文章">
  <div class="max-w-4xl mx-auto">
    <!-- 返回按钮 -->
    <a
      href="/"
      class="inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors mb-8"
    >
      <ArrowLeft size={16} />
      返回首页
    </a>

    <!-- 页面标题 -->
    <header class="mb-8">
      <h1 class="text-3xl font-bold mb-4">博客文章</h1>
      <p class="text-lg text-muted-foreground">
        分享技术学习心得和项目经验
      </p>
    </header>

    <!-- 文章列表 -->
    <div class="space-y-6">
      {sortedPosts.map((post) => (
        <article class="group">
          <a href={`/blog/${post.slug}`} class="block">
            <div class="p-6 border border-border rounded-lg hover:border-primary/50 transition-colors">
              <h2 class="text-xl font-semibold mb-2 group-hover:text-primary transition-colors">
                {post.data.title}
              </h2>
              <p class="text-muted-foreground mb-4 line-clamp-2">
                {post.data.description}
              </p>
              <div class="flex items-center gap-4 text-sm text-muted-foreground">
                <div class="flex items-center gap-1">
                  <Calendar size={14} />
                  <span>{post.data.pubDate.toLocaleDateString('zh-CN')}</span>
                </div>
                {post.data.tags && post.data.tags.length > 0 && (
                  <>
                    <span>•</span>
                    <div class="flex items-center gap-1">
                      <Tag size={14} />
                      <span>{post.data.tags.join(", ")}</span>
                    </div>
                  </>
                )}
              </div>
            </div>
          </a>
        </article>
      ))}
    </div>

    <!-- 空状态 -->
    {sortedPosts.length === 0 && (
      <div class="text-center py-12">
        <p class="text-muted-foreground">暂无博客文章</p>
      </div>
    )}
  </div>
</Layout> 